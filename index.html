<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">

    <title>Flowbox</title>
    <script>
        (function(d, id) {
          if (!window.flowbox) { var f = function () { f.q.push(arguments); }; f.q = []; window.flowbox = f; }
          if (d.getElementById(id)) {return;}
          var s = d.createElement('script'), fjs = d.scripts[d.scripts.length - 1]; s.id = id; s.async = true;
          s.src = ' https://connect.getflowbox.com/flowbox.js';
          fjs.parentNode.insertBefore(s, fjs);
        })(document, 'flowbox-js-embed');
    </script>
  </head>
  <body>

    <div class="container">
        <div class="row">
            <div class="col-lg-12">
                <h1>Flowbox</h1>
            </div>
            <div class="col-lg-12">
                <div class="tags">
                    <ul class="bfab-flowbox-categories">		
                        <li>
                            <a class="active" data-tag="funkis sekelskifte tjugotal 50-och-60-tal hall kök sovrum bad-och-wc offentliga-rum" href="javascript:;">Alla bilder</a>
                        </li>
                        <li>
                            <a data-tag="funkis" href="">Funkis</a>
                        </li>
                        <li>
                            <a data-tag="sekelskifte" href="javascript:;">Sekelskifte</a>
                        </li>
                        <li>
                            <a data-tag="tjugotal" href="javascript:;">Tjugotal</a>
                        </li>
                        <li>
                            <a data-tag="50-och-60-tal" href="javascript:;">50- och 60-tal</a>
                        </li>
                        <li>
                            <a data-tag="hall" href="javascript:;">Hall</a>
                        </li>
                        <li>
                            <a data-tag="kök" href="javascript:;">Kök</a>
                        </li>
                        <li>
                            <a data-tag="sovrum" href="javascript:;">Sovrum</a>
                        </li>
                        <li>
                            <a data-tag="bad-och-wc" href="javascript:;">Bad &amp; WC</a>
                        </li>
                        <li>
                            <a data-tag="offentliga-rum" href="javascript:;">Offentliga rum</a>
                        </li>
                    </ul>
                </div>
            </div>
            <div id="js-flowbox-flow" class="col-lg-12"></div>
        </div>
    </div>

    <script>
        window.addEventListener('load', function () {

            window.flowbox('init', {
                container: '#js-flowbox-flow',
                key: 'RckgS3DqTPC6v-ZcdlpyJg',
                tags: ['belysning', 'inredning', 'kök2']
            })

            //[ 'funkis', 'sekelskifte', 'tjugotal', '50-och-60-tal', 'hall', 'sovrum', 'bad-och-wc', 'offentliga-rum' ]

            function updateFlow (tag) {
                console.log(tag)
                window.flowbox('update', {
                key: 'RckgS3DqTPC6v-ZcdlpyJg',
                tags: tag,
                })
            }

            const buttons = document.querySelectorAll('a[data-tag]')

            function clearButtonClasses () {
                for (const button of buttons) {
                button.classList.remove('active')
                }
            }

            for (const button of buttons) {
                button.addEventListener('click', () => {

                    let tags = button.dataset.tag.split(" ");

                    if(tags.length > 1) {
                        updateFlow(tags)
                    } else {
                        updateFlow([button.dataset.tag])
                    }

                clearButtonClasses()
                button.classList.add('active')
                })
            }
        })
    </script>

    <!-- https://help.getflowbox.com/en/articles/2550100-embedding-a-flow-on-your-website -->

    <!-- Option 1: jQuery and Bootstrap Bundle (includes Popper) -->
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ho+j7jyWK8fNQe+A12Hb8AhRq26LrZ/JpcUGGOn+Y7RsweNrtN/tE3MoK7ZeZDyx" crossorigin="anonymous"></script>

    
  </body>
</html>